org 0000h
MOV A,#38H
ACALL COMMAND
MOV A,#0FH
ACALL COMMAND
MOV A,#01H
ACALL COMMAND
MOV A,#06H
ACALL COMMAND
MOV A,#80H
ACALL COMMAND

MOV R5,#00H
mov r2,#00h
start: 
mov p3,#00h
mov p1,#0fFh
again:
mov R5,p1
cjne R5,#0ffh,again
acall delay
wait:
mov R5,p1
cjne R5,#0feh,k2
MOV A,#80H
ACALL COMMAND
inc R2
LCALL DELAY
LCALL DELAY
LCALL BUTTON_PRESS
MOV P3,R2
k2:sjmp wait
sjmp again

//MOV R2,#02H //BUTTON PRESS
BUTTON_PRESS:
MOV R0,#00H
MOV DPTR,#MSG
CJNE R2,#01H,R11
MOV R1,#00H
ACALL F_ADDRESS
ACALL DIS_IC
RET

R11:
CJNE R2,#02H,R22
MOV R1,#04H


MOV 21H,R1
ACALL F_ADDRESS
ACALL F_LOCATION
ACALL DIS_IC
RET
R22:
CJNE R2,#03H,R33
MOV R1,#08H

MOV 21H,R1
ACALL F_ADDRESS
ACALL F_LOCATION
ACALL DIS_IC
RET

R33:
CJNE R2,#04H,HERE
MOV R1,#0CH


MOV R1,#0CH
MOV 21H,R1
ACALL F_ADDRESS
ACALL F_LOCATION
ACALL DIS_IC
RET

DIS_IC:INC R1
CLR A
MOVC A,@A+DPTR
INC DPTR
LCALL DISPLAY
CLR A
MOV A,R1
CJNE A,20H,DIS_IC
RET
ACALL BUTTON_PRESS

F_ADDRESS:
MOV 20H,R1
CLR A
ADD A,#04H



ADD A,20H
MOV 20H,A
RET

F_LOCATION:
INC R0
CLR A
MOVC A,@A+DPTR
INC DPTR
CLR A
MOV A,R0
CJNE A,21H,F_LOCATION
RET

COMMAND: ACALL READY
	MOV P3,A
	CLR P2.5
	CLR P2.6
	SETB P2.7
  ACALL DELAY
	CLR P2.7
	RET
		
DISPLAY: ACALL READY		
		MOV P3,A
		SETB P2.5
		CLR P2.6
		SETB P2.7
		ACALL DELAY
		CLR P2.7
		RET
		
				
READY:SETB P3.7
	CLR P2.5
	SETB P2.6
BACK:SETB P2.7
	ACALL DELAY
	CLR P2.7
	JNB P3.7,BACK
	RET

HERE:SJMP HERE
DELAY:mov r6,#100
thr2:mov r7,#250
thr1:nop
nop
djnz r7,thr1
djnz r6,thr2
ret
/*DELAY: MOV R0,#0FFH
HERE1:DJNZ R0,HERE1
RET */

org 300h
MSG: DB '7400','7401','7402','7403',0
END 